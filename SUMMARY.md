# é¡¹ç›®è½¬æ¢æ€»ç»“ - Project Conversion Summary

## åŸå§‹é¡¹ç›®
- **æ–‡ä»¶**: `tst.py`
- **ç±»å‹**: Python è„šæœ¬
- **åŠŸèƒ½**: ä½¿ç”¨ Perplexity AI API è¿›è¡Œå‘½ä»¤è¡Œå¯¹è¯

## è½¬æ¢åçš„é¡¹ç›®
- **ç±»å‹**: å®Œæ•´çš„ Web åº”ç”¨
- **å‰ç«¯**: HTML + CSS + JavaScript (GitHub Pages)
- **åç«¯**: Cloudflare Worker (Serverless)
- **åŠŸèƒ½**: ç½‘é¡µç‰ˆ AI èŠå¤©æœºå™¨äººï¼Œæ”¯æŒæµå¼å“åº”

---

## ğŸ“ æ–°å»ºæ–‡ä»¶åˆ—è¡¨

### 1. **worker.js** - Cloudflare Worker è„šæœ¬
- æ›¿ä»£åŸ Python è„šæœ¬çš„åŠŸèƒ½
- å¤„ç† Perplexity AI API è°ƒç”¨
- æ”¯æŒæµå¼å“åº”ï¼ˆServer-Sent Eventsï¼‰
- å¤„ç† CORS è·¨åŸŸè¯·æ±‚
- ç¯å¢ƒå˜é‡ç®¡ç† API å¯†é’¥ï¼ˆå®‰å…¨ï¼‰

### 2. **index.html** - ä¸»é¡µé¢
- èŠå¤©ç•Œé¢ UI
- å“åº”å¼è®¾è®¡ï¼ˆæ”¯æŒæ‰‹æœº/å¹³æ¿/æ¡Œé¢ï¼‰
- åŒ…å«æ¶ˆæ¯æ˜¾ç¤ºåŒºã€è¾“å…¥æ¡†ã€å‘é€æŒ‰é’®
- åŠ è½½åŠ¨ç”»æ•ˆæœ

### 3. **app.js** - å‰ç«¯é€»è¾‘
- ä¸ Cloudflare Worker é€šä¿¡
- å¤„ç†ç”¨æˆ·è¾“å…¥å’Œæ¶ˆæ¯æ˜¾ç¤º
- æµå¼å“åº”å¤„ç†ï¼ˆå®æ—¶æ˜¾ç¤º AI å›å¤ï¼‰
- å¯¹è¯å†å²ç®¡ç†ï¼ˆä¿ç•™æœ€è¿‘ 10-20 æ¡ï¼‰
- è‡ªåŠ¨æ»šåŠ¨å’Œè¾“å…¥æ¡†è‡ªé€‚åº”

### 4. **style.css** - æ ·å¼æ–‡ä»¶
- ç°ä»£åŒ–æ¸å˜è‰²ä¸»é¢˜ï¼ˆç´«è‰²ï¼‰
- ä¼˜é›…çš„æ¶ˆæ¯æ°”æ³¡æ ·å¼
- å¹³æ»‘åŠ¨ç”»æ•ˆæœ
- å“åº”å¼å¸ƒå±€
- è‡ªå®šä¹‰æ»šåŠ¨æ¡

### 5. **wrangler.toml** - Cloudflare é…ç½®
- Worker éƒ¨ç½²é…ç½®
- é¡¹ç›®åç§°å’Œå…¼å®¹æ€§è®¾ç½®

### 6. **README.md** - å®Œæ•´æ–‡æ¡£
- è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤
- é…ç½®è¯´æ˜
- æ•…éšœæ’æŸ¥
- åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨

### 7. **QUICKSTART.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—
- ä¸‰æ­¥éƒ¨ç½²æµç¨‹
- å¸¸è§é—®é¢˜è§£å†³
- æµ‹è¯•æ–¹æ³•

### 8. **deploy.sh** - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
- ä¸€é”®éƒ¨ç½² Worker
- è‡ªåŠ¨æ£€æŸ¥ä¾èµ–
- éƒ¨ç½²æç¤º

### 9. **test.html** - æœ¬åœ°æµ‹è¯•æ–‡ä»¶
- æ— éœ€éƒ¨ç½²å³å¯æµ‹è¯•ç•Œé¢
- æ¨¡æ‹Ÿ AI å“åº”
- ç”¨äº UI è°ƒè¯•

### 10. **.gitignore** - Git å¿½ç•¥æ–‡ä»¶
- ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼ˆ.envï¼‰
- æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶

---

## ğŸ”„ ä¸»è¦å˜åŒ–å¯¹æ¯”

| ç‰¹æ€§ | Python åŸç‰ˆ (tst.py) | Web ç‰ˆæœ¬ |
|------|---------------------|----------|
| **è¿è¡Œç¯å¢ƒ** | æœ¬åœ°å‘½ä»¤è¡Œ | ç½‘é¡µæµè§ˆå™¨ |
| **ç”¨æˆ·ç•Œé¢** | ç»ˆç«¯æ–‡æœ¬ | ç°ä»£åŒ–èŠå¤©ç•Œé¢ |
| **éƒ¨ç½²ä½ç½®** | æœ¬åœ°ç”µè„‘ | GitHub Pages (å…¨çƒè®¿é—®) |
| **API è°ƒç”¨** | ç›´æ¥è°ƒç”¨ | é€šè¿‡ Cloudflare Worker |
| **å®‰å…¨æ€§** | æœ¬åœ°å¯†é’¥ | Worker ç¯å¢ƒå˜é‡ï¼ˆåŠ å¯†ï¼‰ |
| **æµå¼å“åº”** | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| **å¯¹è¯å†å²** | âŒ æ—  | âœ… æœ‰ï¼ˆè‡ªåŠ¨ç®¡ç†ï¼‰ |
| **ç§»åŠ¨ç«¯æ”¯æŒ** | âŒ æ—  | âœ… å“åº”å¼è®¾è®¡ |
| **è®¿é—®æ–¹å¼** | éœ€è¦ Python | ä»»ä½•æµè§ˆå™¨ |
| **æˆæœ¬** | æœ¬åœ°è¿è¡Œ | å…è´¹ï¼ˆGitHub + Cloudflareï¼‰ |

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ˜ å°„

### Python ä»£ç  â†’ Worker.js
```python
# Python (tst.py)
client = Perplexity()
stream = client.chat.completions.create(
    model="sonar",
    messages=[...],
    stream=True
)
```

```javascript
// Worker (worker.js)
const response = await fetch('https://api.perplexity.ai/chat/completions', {
    method: 'POST',
    headers: {
        'Authorization': `Bearer ${env.PERPLEXITY_API_KEY}`,
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({
        model: 'sonar',
        messages: messages,
        stream: true,
    }),
});
```

### æµå¼è¾“å‡ºå¤„ç†
```python
# Python
for chunk in stream:
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="")
```

```javascript
// JavaScript (app.js)
const reader = response.body.getReader();
while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    // å¤„ç†å¹¶æ˜¾ç¤ºæ¯ä¸ªæ–‡æœ¬å—
    contentElement.textContent += content;
}
```

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### åŸ Python è„šæœ¬
```bash
python tst.py
```

### æ–° Web åº”ç”¨
```bash
# 1. éƒ¨ç½² Worker
wrangler deploy
wrangler secret put PERPLEXITY_API_KEY

# 2. é…ç½®å‰ç«¯
# ç¼–è¾‘ app.js ä¸­çš„ WORKER_URL

# 3. éƒ¨ç½²åˆ° GitHub
git push origin main
# åœ¨ GitHub Settings å¯ç”¨ Pages
```

---

## âœ¨ æ–°å¢åŠŸèƒ½

1. **å¯¹è¯å†å²ç®¡ç†** - è‡ªåŠ¨ä¿å­˜å’Œå‘é€å†å²æ¶ˆæ¯
2. **å“åº”å¼ UI** - é€‚é…æ‰€æœ‰è®¾å¤‡
3. **æµå¼æ˜¾ç¤º** - å®æ—¶æ˜¾ç¤º AI å›å¤
4. **ä¼˜é›…åŠ¨ç”»** - åŠ è½½æŒ‡ç¤ºå™¨ã€æ¶ˆæ¯æ·¡å…¥ç­‰
5. **è‡ªé€‚åº”è¾“å…¥** - è¾“å…¥æ¡†è‡ªåŠ¨è°ƒæ•´é«˜åº¦
6. **è‡ªåŠ¨æ»šåŠ¨** - æ–°æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨åˆ°è§†å›¾
7. **å¿«æ·é”®æ”¯æŒ** - Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ
8. **é”™è¯¯å¤„ç†** - å‹å¥½çš„é”™è¯¯æç¤º

---

## ğŸ“Š æ¶æ„å¯¹æ¯”

### åŸæ¶æ„
```
[ç”¨æˆ·] â†’ [Python è„šæœ¬] â†’ [Perplexity API]
```

### æ–°æ¶æ„
```
[ç”¨æˆ·æµè§ˆå™¨] â†’ [GitHub Pages (é™æ€æ–‡ä»¶)]
                       â†“
                [Cloudflare Worker]
                       â†“
                [Perplexity API]
```

**ä¼˜åŠ¿:**
- âœ… å‰ç«¯ä¸åç«¯åˆ†ç¦»
- âœ… API å¯†é’¥å®‰å…¨å­˜å‚¨
- âœ… å…¨çƒ CDN åŠ é€Ÿ
- âœ… æ— éœ€æœåŠ¡å™¨ç»´æŠ¤
- âœ… å…è´¹æ‰˜ç®¡

---

## ğŸ” å®‰å…¨æ”¹è¿›

| æ–¹é¢ | Python ç‰ˆæœ¬ | Web ç‰ˆæœ¬ |
|-----|------------|----------|
| **API å¯†é’¥å­˜å‚¨** | .env æ–‡ä»¶ï¼ˆæœ¬åœ°ï¼‰ | Cloudflare åŠ å¯†ç¯å¢ƒå˜é‡ |
| **å¯†é’¥æš´éœ²é£é™©** | ä½ï¼ˆä»…æœ¬åœ°ï¼‰ | æ— ï¼ˆä¸åœ¨å‰ç«¯ä»£ç ä¸­ï¼‰ |
| **è®¿é—®æ§åˆ¶** | æ—  | å¯é…ç½® CORSã€é€Ÿç‡é™åˆ¶ç­‰ |

---

## ğŸ“ˆ æ€§èƒ½ç‰¹ç‚¹

- **æµå¼å“åº”**: ä½¿ç”¨ Server-Sent Events (SSE)ï¼Œå®æ—¶æ˜¾ç¤º
- **å¯¹è¯å†å²ä¼˜åŒ–**: åªå‘é€æœ€è¿‘ 10 æ¡æ¶ˆæ¯ç»™ API
- **å‰ç«¯ç¼“å­˜**: é™æ€èµ„æºç”± GitHub Pages CDN ç¼“å­˜
- **Worker å†·å¯åŠ¨**: Cloudflare Workers æå¿«å¯åŠ¨ï¼ˆ< 100msï¼‰

---

## ğŸ“ å­¦åˆ°çš„æŠ€æœ¯

1. **Cloudflare Workers** - Serverless è¾¹ç¼˜è®¡ç®—
2. **Server-Sent Events (SSE)** - æµå¼æ•°æ®ä¼ è¾“
3. **GitHub Pages** - é™æ€ç½‘ç«™æ‰˜ç®¡
4. **Wrangler CLI** - Worker éƒ¨ç½²å·¥å…·
5. **å“åº”å¼è®¾è®¡** - ç§»åŠ¨ç«¯é€‚é…
6. **ç°ä»£ JavaScript** - Fetch API, Async/Await

---

## ğŸ‰ å®Œæˆï¼

ä½ çš„ Python èŠå¤©è„šæœ¬å·²æˆåŠŸè½¬æ¢ä¸ºåŠŸèƒ½å®Œæ•´çš„ Web åº”ç”¨ï¼

**ä¸‹ä¸€æ­¥å»ºè®®:**
- [ ] éƒ¨ç½²åˆ° Cloudflare Workers
- [ ] é…ç½® Worker URL åˆ° app.js
- [ ] æ¨é€åˆ° GitHub å¹¶å¯ç”¨ Pages
- [ ] æµ‹è¯•å®Œæ•´æµç¨‹
- [ ] è‡ªå®šä¹‰æ ·å¼å’ŒåŠŸèƒ½

**å¯é€‰å¢å¼º:**
- æ·»åŠ æ¸…é™¤å¯¹è¯æŒ‰é’®
- ä¿å­˜å¯¹è¯åˆ°æœ¬åœ°å­˜å‚¨
- æ·»åŠ å¤šä¸ª AI æ¨¡å‹é€‰æ‹©
- æ·»åŠ æ·±è‰²æ¨¡å¼
- æ·»åŠ å¯¼å‡ºå¯¹è¯åŠŸèƒ½

